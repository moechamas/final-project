{"ast":null,"code":"const {\n  strict: assert\n} = require('assert');\nconst {\n  inspect\n} = require('util');\nconst {\n  EOL\n} = require('os');\nconst {\n  keyObjectSupported\n} = require('../../help/runtime_support');\nconst {\n  createPublicKey\n} = require('../../help/key_object');\nconst {\n  keyObjectToJWK\n} = require('../../help/key_utils');\nconst {\n  THUMBPRINT_MATERIAL,\n  PUBLIC_MEMBERS,\n  PRIVATE_MEMBERS,\n  JWK_MEMBERS,\n  KEYOBJECT,\n  USES_MAPPING,\n  OPS,\n  USES\n} = require('../../help/consts');\nconst isObject = require('../../help/is_object');\nconst thumbprint = require('../thumbprint');\nconst errors = require('../../errors');\nconst privateApi = Symbol('privateApi');\nconst {\n  JWK\n} = require('../../registry');\nclass Key {\n  constructor(keyObject, {\n    alg,\n    use,\n    kid,\n    key_ops: ops,\n    x5c,\n    x5t,\n    'x5t#S256': x5t256\n  } = {}) {\n    if (use !== undefined) {\n      if (typeof use !== 'string' || !USES.has(use)) {\n        throw new TypeError('`use` must be either \"sig\" or \"enc\" string when provided');\n      }\n    }\n    if (alg !== undefined) {\n      if (typeof alg !== 'string' || !alg) {\n        throw new TypeError('`alg` must be a non-empty string when provided');\n      }\n    }\n    if (kid !== undefined) {\n      if (typeof kid !== 'string' || !kid) {\n        throw new TypeError('`kid` must be a non-empty string when provided');\n      }\n    }\n    if (ops !== undefined) {\n      if (!Array.isArray(ops) || !ops.length || ops.some(o => typeof o !== 'string')) {\n        throw new TypeError('`key_ops` must be a non-empty array of strings when provided');\n      }\n      ops = Array.from(new Set(ops)).filter(x => OPS.has(x));\n    }\n    if (ops && use) {\n      if (use === 'enc' && ops.some(x => USES_MAPPING.sig.has(x)) || use === 'sig' && ops.some(x => USES_MAPPING.enc.has(x))) {\n        throw new errors.JWKInvalid('inconsistent JWK \"use\" and \"key_ops\"');\n      }\n    }\n    if (keyObjectSupported && x5c !== undefined) {\n      if (!Array.isArray(x5c) || !x5c.length || x5c.some(c => typeof c !== 'string')) {\n        throw new TypeError('`x5c` must be an array of one or more PKIX certificates when provided');\n      }\n      x5c.forEach((cert, i) => {\n        let publicKey;\n        try {\n          publicKey = createPublicKey({\n            key: `-----BEGIN CERTIFICATE-----${EOL}${(cert.match(/.{1,64}/g) || []).join(EOL)}${EOL}-----END CERTIFICATE-----`,\n            format: 'pem'\n          });\n        } catch (err) {\n          throw new errors.JWKInvalid(`\\`x5c\\` member at index ${i} is not a valid base64-encoded DER PKIX certificate`);\n        }\n        if (i === 0) {\n          try {\n            assert.deepEqual(publicKey.export({\n              type: 'spki',\n              format: 'der'\n            }), (keyObject.type === 'public' ? keyObject : createPublicKey(keyObject)).export({\n              type: 'spki',\n              format: 'der'\n            }));\n          } catch (err) {\n            throw new errors.JWKInvalid('The key in the first `x5c` certificate MUST match the public key represented by the JWK');\n          }\n        }\n      });\n    }\n    Object.defineProperties(this, {\n      [KEYOBJECT]: {\n        value: isObject(keyObject) ? undefined : keyObject\n      },\n      keyObject: {\n        get() {\n          if (!keyObjectSupported) {\n            throw new errors.JOSENotSupported('KeyObject class is not supported in your Node.js runtime version');\n          }\n          return this[KEYOBJECT];\n        }\n      },\n      type: {\n        value: keyObject.type\n      },\n      private: {\n        value: keyObject.type === 'private'\n      },\n      public: {\n        value: keyObject.type === 'public'\n      },\n      secret: {\n        value: keyObject.type === 'secret'\n      },\n      alg: {\n        value: alg,\n        enumerable: alg !== undefined\n      },\n      use: {\n        value: use,\n        enumerable: use !== undefined\n      },\n      x5c: {\n        enumerable: x5c !== undefined,\n        ...(x5c ? {\n          get() {\n            return [...x5c];\n          }\n        } : {\n          value: undefined\n        })\n      },\n      key_ops: {\n        enumerable: ops !== undefined,\n        ...(ops ? {\n          get() {\n            return [...ops];\n          }\n        } : {\n          value: undefined\n        })\n      },\n      kid: {\n        enumerable: true,\n        ...(kid ? {\n          value: kid\n        } : {\n          get() {\n            Object.defineProperty(this, 'kid', {\n              value: this.thumbprint,\n              configurable: false\n            });\n            return this.kid;\n          },\n          configurable: true\n        })\n      },\n      ...(x5c ? {\n        x5t: {\n          enumerable: true,\n          ...(x5t ? {\n            value: x5t\n          } : {\n            get() {\n              Object.defineProperty(this, 'x5t', {\n                value: thumbprint.x5t(this.x5c[0]),\n                configurable: false\n              });\n              return this.x5t;\n            },\n            configurable: true\n          })\n        }\n      } : undefined),\n      ...(x5c ? {\n        'x5t#S256': {\n          enumerable: true,\n          ...(x5t256 ? {\n            value: x5t256\n          } : {\n            get() {\n              Object.defineProperty(this, 'x5t#S256', {\n                value: thumbprint['x5t#S256'](this.x5c[0]),\n                configurable: false\n              });\n              return this['x5t#S256'];\n            },\n            configurable: true\n          })\n        }\n      } : undefined),\n      thumbprint: {\n        get() {\n          Object.defineProperty(this, 'thumbprint', {\n            value: thumbprint.kid(this[THUMBPRINT_MATERIAL]()),\n            configurable: false\n          });\n          return this.thumbprint;\n        },\n        configurable: true\n      }\n    });\n  }\n  toPEM(priv = false, encoding = {}) {\n    if (this.secret) {\n      throw new TypeError('symmetric keys cannot be exported as PEM');\n    }\n    if (priv && this.public === true) {\n      throw new TypeError('public key cannot be exported as private');\n    }\n    const {\n      type = priv ? 'pkcs8' : 'spki',\n      cipher,\n      passphrase\n    } = encoding;\n    let keyObject = this[KEYOBJECT];\n    if (!priv) {\n      if (this.private) {\n        keyObject = createPublicKey(keyObject);\n      }\n      if (cipher || passphrase) {\n        throw new TypeError('cipher and passphrase can only be applied when exporting private keys');\n      }\n    }\n    if (priv) {\n      return keyObject.export({\n        format: 'pem',\n        type,\n        cipher,\n        passphrase\n      });\n    }\n    return keyObject.export({\n      format: 'pem',\n      type\n    });\n  }\n  toJWK(priv = false) {\n    if (priv && this.public === true) {\n      throw new TypeError('public key cannot be exported as private');\n    }\n    const components = [...this.constructor[priv ? PRIVATE_MEMBERS : PUBLIC_MEMBERS]].map(k => [k, this[k]]);\n    const result = {};\n    Object.keys(components).forEach(key => {\n      const [k, v] = components[key];\n      result[k] = v;\n    });\n    result.kty = this.kty;\n    result.kid = this.kid;\n    if (this.alg) {\n      result.alg = this.alg;\n    }\n    if (this.key_ops && this.key_ops.length) {\n      result.key_ops = this.key_ops;\n    }\n    if (this.use) {\n      result.use = this.use;\n    }\n    if (this.x5c) {\n      result.x5c = this.x5c;\n    }\n    if (this.x5t) {\n      result.x5t = this.x5t;\n    }\n    if (this['x5t#S256']) {\n      result['x5t#S256'] = this['x5t#S256'];\n    }\n    return result;\n  }\n  [JWK_MEMBERS]() {\n    const props = this[KEYOBJECT].type === 'private' ? this.constructor[PRIVATE_MEMBERS] : this.constructor[PUBLIC_MEMBERS];\n    Object.defineProperties(this, [...props].reduce((acc, component) => {\n      acc[component] = {\n        get() {\n          const jwk = keyObjectToJWK(this[KEYOBJECT]);\n          Object.defineProperties(this, Object.entries(jwk).filter(([key]) => props.has(key)).reduce((acc, [key, value]) => {\n            acc[key] = {\n              value,\n              enumerable: this.constructor[PUBLIC_MEMBERS].has(key),\n              configurable: false\n            };\n            return acc;\n          }, {}));\n          return this[component];\n        },\n        enumerable: this.constructor[PUBLIC_MEMBERS].has(component),\n        configurable: true\n      };\n      return acc;\n    }, {}));\n  }\n\n  /* c8 ignore next 8 */\n  [inspect.custom]() {\n    return `${this.constructor.name} ${inspect(this.toJWK(false), {\n      depth: Infinity,\n      colors: process.stdout.isTTY,\n      compact: false,\n      sorted: true\n    })}`;\n  }\n\n  /* c8 ignore next 3 */\n  [THUMBPRINT_MATERIAL]() {\n    throw new Error(`\"[THUMBPRINT_MATERIAL]()\" is not implemented on ${this.constructor.name}`);\n  }\n  algorithms(operation, /* the rest is private API */int, opts) {\n    const {\n      use = this.use,\n      alg = this.alg,\n      key_ops: ops = this.key_ops\n    } = int === privateApi ? opts : {};\n    if (alg) {\n      return new Set(this.algorithms(operation, privateApi, {\n        alg: null,\n        use,\n        key_ops: ops\n      }).has(alg) ? [alg] : undefined);\n    }\n    if (typeof operation === 'symbol') {\n      try {\n        return this[operation]();\n      } catch (err) {\n        return new Set();\n      }\n    }\n    if (operation && ops && !ops.includes(operation)) {\n      return new Set();\n    }\n    switch (operation) {\n      case 'decrypt':\n      case 'deriveKey':\n      case 'encrypt':\n      case 'sign':\n      case 'unwrapKey':\n      case 'verify':\n      case 'wrapKey':\n        return new Set(Object.entries(JWK[this.kty][operation]).map(([alg, fn]) => fn(this) ? alg : undefined).filter(Boolean));\n      case undefined:\n        return new Set([...this.algorithms('sign'), ...this.algorithms('verify'), ...this.algorithms('decrypt'), ...this.algorithms('encrypt'), ...this.algorithms('unwrapKey'), ...this.algorithms('wrapKey'), ...this.algorithms('deriveKey')]);\n      default:\n        throw new TypeError('invalid key operation');\n    }\n  }\n\n  /* c8 ignore next 3 */\n  static async generate() {\n    throw new Error(`\"static async generate()\" is not implemented on ${this.name}`);\n  }\n\n  /* c8 ignore next 3 */\n  static generateSync() {\n    throw new Error(`\"static generateSync()\" is not implemented on ${this.name}`);\n  }\n\n  /* c8 ignore next 3 */\n  static get [PUBLIC_MEMBERS]() {\n    throw new Error(`\"static get [PUBLIC_MEMBERS]()\" is not implemented on ${this.name}`);\n  }\n\n  /* c8 ignore next 3 */\n  static get [PRIVATE_MEMBERS]() {\n    throw new Error(`\"static get [PRIVATE_MEMBERS]()\" is not implemented on ${this.name}`);\n  }\n}\nmodule.exports = Key;","map":{"version":3,"names":["strict","assert","require","inspect","EOL","keyObjectSupported","createPublicKey","keyObjectToJWK","THUMBPRINT_MATERIAL","PUBLIC_MEMBERS","PRIVATE_MEMBERS","JWK_MEMBERS","KEYOBJECT","USES_MAPPING","OPS","USES","isObject","thumbprint","errors","privateApi","Symbol","JWK","Key","constructor","keyObject","alg","use","kid","key_ops","ops","x5c","x5t","x5t256","undefined","has","TypeError","Array","isArray","length","some","o","from","Set","filter","x","sig","enc","JWKInvalid","c","forEach","cert","i","publicKey","key","match","join","format","err","deepEqual","export","type","Object","defineProperties","value","get","JOSENotSupported","private","public","secret","enumerable","defineProperty","configurable","toPEM","priv","encoding","cipher","passphrase","toJWK","components","map","k","result","keys","v","kty","props","reduce","acc","component","jwk","entries","custom","name","depth","Infinity","colors","process","stdout","isTTY","compact","sorted","Error","algorithms","operation","int","opts","includes","fn","Boolean","generate","generateSync","module","exports"],"sources":["/Users/chamas/Final-Project/final-project/node_modules/jose/lib/jwk/key/base.js"],"sourcesContent":["const { strict: assert } = require('assert')\nconst { inspect } = require('util')\nconst { EOL } = require('os')\n\nconst { keyObjectSupported } = require('../../help/runtime_support')\nconst { createPublicKey } = require('../../help/key_object')\nconst { keyObjectToJWK } = require('../../help/key_utils')\nconst {\n  THUMBPRINT_MATERIAL, PUBLIC_MEMBERS, PRIVATE_MEMBERS, JWK_MEMBERS, KEYOBJECT,\n  USES_MAPPING, OPS, USES\n} = require('../../help/consts')\nconst isObject = require('../../help/is_object')\nconst thumbprint = require('../thumbprint')\nconst errors = require('../../errors')\n\nconst privateApi = Symbol('privateApi')\nconst { JWK } = require('../../registry')\n\nclass Key {\n  constructor (keyObject, { alg, use, kid, key_ops: ops, x5c, x5t, 'x5t#S256': x5t256 } = {}) {\n    if (use !== undefined) {\n      if (typeof use !== 'string' || !USES.has(use)) {\n        throw new TypeError('`use` must be either \"sig\" or \"enc\" string when provided')\n      }\n    }\n\n    if (alg !== undefined) {\n      if (typeof alg !== 'string' || !alg) {\n        throw new TypeError('`alg` must be a non-empty string when provided')\n      }\n    }\n\n    if (kid !== undefined) {\n      if (typeof kid !== 'string' || !kid) {\n        throw new TypeError('`kid` must be a non-empty string when provided')\n      }\n    }\n\n    if (ops !== undefined) {\n      if (!Array.isArray(ops) || !ops.length || ops.some(o => typeof o !== 'string')) {\n        throw new TypeError('`key_ops` must be a non-empty array of strings when provided')\n      }\n      ops = Array.from(new Set(ops)).filter(x => OPS.has(x))\n    }\n\n    if (ops && use) {\n      if (\n        (use === 'enc' && ops.some(x => USES_MAPPING.sig.has(x))) ||\n        (use === 'sig' && ops.some(x => USES_MAPPING.enc.has(x)))\n      ) {\n        throw new errors.JWKInvalid('inconsistent JWK \"use\" and \"key_ops\"')\n      }\n    }\n\n    if (keyObjectSupported && x5c !== undefined) {\n      if (!Array.isArray(x5c) || !x5c.length || x5c.some(c => typeof c !== 'string')) {\n        throw new TypeError('`x5c` must be an array of one or more PKIX certificates when provided')\n      }\n\n      x5c.forEach((cert, i) => {\n        let publicKey\n        try {\n          publicKey = createPublicKey({\n            key: `-----BEGIN CERTIFICATE-----${EOL}${(cert.match(/.{1,64}/g) || []).join(EOL)}${EOL}-----END CERTIFICATE-----`, format: 'pem'\n          })\n        } catch (err) {\n          throw new errors.JWKInvalid(`\\`x5c\\` member at index ${i} is not a valid base64-encoded DER PKIX certificate`)\n        }\n        if (i === 0) {\n          try {\n            assert.deepEqual(\n              publicKey.export({ type: 'spki', format: 'der' }),\n              (keyObject.type === 'public' ? keyObject : createPublicKey(keyObject)).export({ type: 'spki', format: 'der' })\n            )\n          } catch (err) {\n            throw new errors.JWKInvalid('The key in the first `x5c` certificate MUST match the public key represented by the JWK')\n          }\n        }\n      })\n    }\n\n    Object.defineProperties(this, {\n      [KEYOBJECT]: { value: isObject(keyObject) ? undefined : keyObject },\n      keyObject: {\n        get () {\n          if (!keyObjectSupported) {\n            throw new errors.JOSENotSupported('KeyObject class is not supported in your Node.js runtime version')\n          }\n\n          return this[KEYOBJECT]\n        }\n      },\n      type: { value: keyObject.type },\n      private: { value: keyObject.type === 'private' },\n      public: { value: keyObject.type === 'public' },\n      secret: { value: keyObject.type === 'secret' },\n      alg: { value: alg, enumerable: alg !== undefined },\n      use: { value: use, enumerable: use !== undefined },\n      x5c: {\n        enumerable: x5c !== undefined,\n        ...(x5c ? { get () { return [...x5c] } } : { value: undefined })\n      },\n      key_ops: {\n        enumerable: ops !== undefined,\n        ...(ops ? { get () { return [...ops] } } : { value: undefined })\n      },\n      kid: {\n        enumerable: true,\n        ...(kid\n          ? { value: kid }\n          : {\n              get () {\n                Object.defineProperty(this, 'kid', { value: this.thumbprint, configurable: false })\n                return this.kid\n              },\n              configurable: true\n            })\n      },\n      ...(x5c\n        ? {\n            x5t: {\n              enumerable: true,\n              ...(x5t\n                ? { value: x5t }\n                : {\n                    get () {\n                      Object.defineProperty(this, 'x5t', { value: thumbprint.x5t(this.x5c[0]), configurable: false })\n                      return this.x5t\n                    },\n                    configurable: true\n                  })\n            }\n          }\n        : undefined),\n      ...(x5c\n        ? {\n            'x5t#S256': {\n              enumerable: true,\n              ...(x5t256\n                ? { value: x5t256 }\n                : {\n                    get () {\n                      Object.defineProperty(this, 'x5t#S256', { value: thumbprint['x5t#S256'](this.x5c[0]), configurable: false })\n                      return this['x5t#S256']\n                    },\n                    configurable: true\n                  })\n            }\n          }\n        : undefined),\n      thumbprint: {\n        get () {\n          Object.defineProperty(this, 'thumbprint', { value: thumbprint.kid(this[THUMBPRINT_MATERIAL]()), configurable: false })\n          return this.thumbprint\n        },\n        configurable: true\n      }\n    })\n  }\n\n  toPEM (priv = false, encoding = {}) {\n    if (this.secret) {\n      throw new TypeError('symmetric keys cannot be exported as PEM')\n    }\n\n    if (priv && this.public === true) {\n      throw new TypeError('public key cannot be exported as private')\n    }\n\n    const { type = priv ? 'pkcs8' : 'spki', cipher, passphrase } = encoding\n\n    let keyObject = this[KEYOBJECT]\n\n    if (!priv) {\n      if (this.private) {\n        keyObject = createPublicKey(keyObject)\n      }\n      if (cipher || passphrase) {\n        throw new TypeError('cipher and passphrase can only be applied when exporting private keys')\n      }\n    }\n\n    if (priv) {\n      return keyObject.export({ format: 'pem', type, cipher, passphrase })\n    }\n\n    return keyObject.export({ format: 'pem', type })\n  }\n\n  toJWK (priv = false) {\n    if (priv && this.public === true) {\n      throw new TypeError('public key cannot be exported as private')\n    }\n\n    const components = [...this.constructor[priv ? PRIVATE_MEMBERS : PUBLIC_MEMBERS]]\n      .map(k => [k, this[k]])\n\n    const result = {}\n\n    Object.keys(components).forEach((key) => {\n      const [k, v] = components[key]\n\n      result[k] = v\n    })\n\n    result.kty = this.kty\n    result.kid = this.kid\n\n    if (this.alg) {\n      result.alg = this.alg\n    }\n\n    if (this.key_ops && this.key_ops.length) {\n      result.key_ops = this.key_ops\n    }\n\n    if (this.use) {\n      result.use = this.use\n    }\n\n    if (this.x5c) {\n      result.x5c = this.x5c\n    }\n\n    if (this.x5t) {\n      result.x5t = this.x5t\n    }\n\n    if (this['x5t#S256']) {\n      result['x5t#S256'] = this['x5t#S256']\n    }\n\n    return result\n  }\n\n  [JWK_MEMBERS] () {\n    const props = this[KEYOBJECT].type === 'private' ? this.constructor[PRIVATE_MEMBERS] : this.constructor[PUBLIC_MEMBERS]\n    Object.defineProperties(this, [...props].reduce((acc, component) => {\n      acc[component] = {\n        get () {\n          const jwk = keyObjectToJWK(this[KEYOBJECT])\n          Object.defineProperties(\n            this,\n            Object.entries(jwk)\n              .filter(([key]) => props.has(key))\n              .reduce((acc, [key, value]) => {\n                acc[key] = { value, enumerable: this.constructor[PUBLIC_MEMBERS].has(key), configurable: false }\n                return acc\n              }, {})\n          )\n\n          return this[component]\n        },\n        enumerable: this.constructor[PUBLIC_MEMBERS].has(component),\n        configurable: true\n      }\n      return acc\n    }, {}))\n  }\n\n  /* c8 ignore next 8 */\n  [inspect.custom] () {\n    return `${this.constructor.name} ${inspect(this.toJWK(false), {\n      depth: Infinity,\n      colors: process.stdout.isTTY,\n      compact: false,\n      sorted: true\n    })}`\n  }\n\n  /* c8 ignore next 3 */\n  [THUMBPRINT_MATERIAL] () {\n    throw new Error(`\"[THUMBPRINT_MATERIAL]()\" is not implemented on ${this.constructor.name}`)\n  }\n\n  algorithms (operation, /* the rest is private API */ int, opts) {\n    const { use = this.use, alg = this.alg, key_ops: ops = this.key_ops } = int === privateApi ? opts : {}\n    if (alg) {\n      return new Set(this.algorithms(operation, privateApi, { alg: null, use, key_ops: ops }).has(alg) ? [alg] : undefined)\n    }\n\n    if (typeof operation === 'symbol') {\n      try {\n        return this[operation]()\n      } catch (err) {\n        return new Set()\n      }\n    }\n\n    if (operation && ops && !ops.includes(operation)) {\n      return new Set()\n    }\n\n    switch (operation) {\n      case 'decrypt':\n      case 'deriveKey':\n      case 'encrypt':\n      case 'sign':\n      case 'unwrapKey':\n      case 'verify':\n      case 'wrapKey':\n        return new Set(Object.entries(JWK[this.kty][operation]).map(([alg, fn]) => fn(this) ? alg : undefined).filter(Boolean))\n      case undefined:\n        return new Set([\n          ...this.algorithms('sign'),\n          ...this.algorithms('verify'),\n          ...this.algorithms('decrypt'),\n          ...this.algorithms('encrypt'),\n          ...this.algorithms('unwrapKey'),\n          ...this.algorithms('wrapKey'),\n          ...this.algorithms('deriveKey')\n        ])\n      default:\n        throw new TypeError('invalid key operation')\n    }\n  }\n\n  /* c8 ignore next 3 */\n  static async generate () {\n    throw new Error(`\"static async generate()\" is not implemented on ${this.name}`)\n  }\n\n  /* c8 ignore next 3 */\n  static generateSync () {\n    throw new Error(`\"static generateSync()\" is not implemented on ${this.name}`)\n  }\n\n  /* c8 ignore next 3 */\n  static get [PUBLIC_MEMBERS] () {\n    throw new Error(`\"static get [PUBLIC_MEMBERS]()\" is not implemented on ${this.name}`)\n  }\n\n  /* c8 ignore next 3 */\n  static get [PRIVATE_MEMBERS] () {\n    throw new Error(`\"static get [PRIVATE_MEMBERS]()\" is not implemented on ${this.name}`)\n  }\n}\n\nmodule.exports = Key\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}